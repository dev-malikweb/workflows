name: Cleanup Duplicate Team Images Across Folders

on:
  push:
  workflow_dispatch:

permissions:
  contents: write

jobs:
  cleanup:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Ø­Ø°Ù Ø§Ù„ØµÙˆØ± Ø§Ù„Ù…ÙƒØ±Ø±Ø© Ù…Ù† Ù…Ø¬Ù„Ø¯Ø§Øª Ø§Ù„ÙØ±Ù‚
        run: |
          for dir in teams-imgs national-teams-imgs; do
            if [[ -d "$dir" ]]; then
              echo "ğŸ§¹ ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù…Ø¬Ù„Ø¯: $dir"
              cd "$dir"
              for file in *; do
                if [[ -f "$file" ]]; then
                  id=$(echo "$file" | sed -E 's/^([0-9]+).*$/\1/')
                  original="$id.${file##*.}"
                  if [[ "$file" != "$original" && -f "$original" ]]; then
                    echo "ğŸ—‘ Ø­Ø°Ù: $file (Ø§Ù„Ù…Ø¬Ù„Ø¯: $dirØŒ Ø§Ù„Ø£ØµÙ„: $original)"
                    rm "$file"
                  fi
                fi
              done
              cd ..
            else
              echo "âš ï¸ Ø§Ù„Ù…Ø¬Ù„Ø¯ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯: $dir"
            fi
          done

      - name: Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª
        run: |
          git config --global user.name "github-actions"
          git config --global user.email "actions@github.com"
          git add .
          git commit -m "Ø­Ø°Ù Ø§Ù„ØµÙˆØ± Ø§Ù„Ù…ÙƒØ±Ø±Ø© Ø­Ø³Ø¨ Ø§Ù„Ù…Ø¹Ø±Ù Ù…Ù† Ù…Ø¬Ù„Ø¯Ø§Øª Ø§Ù„ÙØ±Ù‚" || echo "Ù„Ø§ ØªØºÙŠÙŠØ±Ø§Øª Ù„Ù„Ø­ÙØ¸"
          git push
